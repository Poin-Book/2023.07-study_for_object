# 무엇이 문제인가
> 작성자: 최선규

## 목차
- [무엇이 문제인가](#무엇이-문제인가)
  - [목차](#목차)
  - [소프트웨어 모듈이 가져야 하는 세 가지 기능 (로버스 마틴)](#소프트웨어-모듈이-가져야-하는-세-가지-기능-로버스-마틴)
  - [Section 1의 문제 A) 이해하기 어렵다.](#section-1의-문제-a-이해하기-어렵다)
    - [예상을 빗나가는 코드](#예상을-빗나가는-코드)
    - [세부적인 내용을 기억하고 있어야 하는 코드](#세부적인-내용을-기억하고-있어야-하는-코드)
  - [Section 1의 문제 B) 변경하기 어렵다.](#section-1의-문제-b-변경하기-어렵다)
    - [의존성과 결합도](#의존성과-결합도)
    - [우리의 목표](#우리의-목표)

## 소프트웨어 모듈이 가져야 하는 세 가지 기능 (로버스 마틴)

1. 실행 중에 제대로 동작하는 것
2. 변경에 용이한 것
3. 코드를 이해하기 쉬운 것

- Section 1에서 작성한 코드는 실행 중에 제대로 동작하나 2번과 3번의 기능을 만족하지 못한다.

## Section 1의 문제 A) 이해하기 어렵다.
> 이해 가능한 코드란 그 동작이 우리의 예상에서 크게 벗어나지 않는 코드다

### 예상을 빗나가는 코드

**[Theater 클래스의 enter 메서드]**
  1. 소극장은 관람객의 가방을 열어 그 안에 초대장이 들어있는지 살펴본다.
  2. 가방 안에 초대방이 들어 있으면 판매원은 매표소에서 티켓을 꺼내 관람객에게 준다.
  3. 가방 안에 초대장이 들어있지 않으면 관람객의 가방에서 현금을 꺼내 매표소에 있는 매표원에게 티켓 값을 지불한 후 매표소에서 티켓을 꺼내 관람객에게 준다.

**[관람객과 판매원이 소극장의 통제를 받는다]**

  - 누군가 관람객의 가방을 마음대로 훔쳐보고 돈을 가져가고 티켓을 넣는 다는 것이 정상적인가?
  - 판매원이 일을 하지 않더라도 티켓이 하나씩 사라지고 돈이 증가하는 것은 정상적인가?

### 세부적인 내용을 기억하고 있어야 하는 코드

**[Theater 클래스의 enter 메서드가 알아야 하는 정보]**
- Audience가 Bag을 가지고 있다.
- Bag 안에는 현금과 초대장, 티켓이 있을 수 있다.
- TicketSeller가 TicketOffice에서 티켓을 판매한다.
- TicketOffice에는 티켓과 현금이 들어있다.

**[하나의 클래스나 메서드에서 너무 많은 세부사항을 다룰때 발생하는 문제]**

1. 코드를 이해하기 어렵다.<br>
    모든 세부사항을 기억하고 있어야만 코드를 이해할 수 있다.

1. 코드를 작성하기 어렵다.<br>
    모든 세부사항을 기억하고 있어야만 코드를 작성할 수 있다.

2. 코드를 변경하기 어렵다.<br>
    만약 Audience와 TicketSeller의 코드가 변하면 Theater의 코드도 함께 변경해야 한다.

## Section 1의 문제 B) 변경하기 어렵다.
> 다른 클래스가 클래스 A에 대해 더욱 자세히 알수록 A를 변경하기 어렵게 만든다.

### 의존성과 결합도

**[클래스 다이어 그램]**

![1.2 클래스 다이어그램](https://github.com/luke0408/study_for_object/assets/98688494/144849b4-a869-488b-a349-f4b622470447)

**[의존성]**
- 만약 Audience가 Bag을 가지고 있다는 가정이 틀리다면?
  - Audience에서 Bag을 제거해야한다.
  - Audience의 Bag에 직접 접근하는 Theater의 Enter 메서드를 수정해야한다.
  - 뿐만 아니라 Theater는 Audience가 Bag을 가지고 있다는 사실과 TicketSeller가 TicketOffice에서 티켓을 판매한다는 사실에 의존함으로 세부사항이 변경될 때마다 Theater도 함께 변경해야 한다.

- 이것은 객체들 사이의 의존성(dependency)와 관련된 문제이다.
- 의존성은 변경에 의해 영향을 받는 방향으로 흐른다. 즉, 의존성이라는 말은 어떤 객체가 변경될 때 그 객체에게 의존하는 다른 객체도 함께 변경될 수 있다는 사실을 내포한다.

**[결합도]**
- 객체 사이의 의존성이 과한 경우를 결합도(coupling)가 높다고 말한다.
- 반대로 의존성이 적절한(합리적인 수준) 경우를 결합도가 낮다고 말한다.

- 결합도는 의존성과 관련이 있기 때문에 결합도 역시 변경과 관련이 있다.
- 즉, 두 객체 사이의 결합도가 높으면 높을수록 한 객체가 변경될 때 다른 객체도 함께 변경될 가능성이 높아지기 때문에 변경하기 어려워진다.

### 우리의 목표
- 애플리케이션의 기능을 구현하는 대에 있어서 필요한 최소한의 의존성만 유지하고 불필요한 의존성은 제거하는 것이다.
  - 모든 의존성을 제거하는 것은 정답이 아니다.
  - 객체지향 설계는 서로 의존하면서 협력하는 객체들의 공동체를 구축하는 것이기 때문이다.
- 객체 사이의 결합도를 낮춰 변경하기 쉬운 코드를 작성하는 것이다.
